import{_ as i,c as t,o as a,ae as h}from"./chunks/framework.B4YfsRs4.js";const E=JSON.parse('{"title":"getMapScale","description":"","frontmatter":{},"headers":[],"relativePath":"utils/map.md","filePath":"utils/map.md"}'),n={name:"utils/map.md"};function l(e,s,d,k,p,r){return a(),t("div",null,s[0]||(s[0]=[h(`<h1 id="getmapscale" tabindex="-1">getMapScale <a class="header-anchor" href="#getmapscale" aria-label="Permalink to &quot;getMapScale&quot;">​</a></h1><p>根据两个经纬度点计算推荐的地图缩放级别，使用 Haversine 公式计算距离并基于距离自动匹配合适的缩放级别。</p><h2 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 计算北京到上海的缩放级别（适合大范围展示）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> zoom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getMapScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">116.4074</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">39.9042</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">121.4737</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31.2304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;big&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(zoom); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 根据距离自动返回合适的缩放级别</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 计算两个相近地点的缩放级别（适合精细展示）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> zoomSmall</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getMapScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">116.4074</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">39.9042</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">116.4174</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">39.9142</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;small&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自定义缩放规则（比如适配特定地图服务）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> customZoom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getMapScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">116.4074</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">39.9042</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">121.4737</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31.2304</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 距离 &gt; 2000km 时使用缩放级别 5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 距离 &gt; 500km 时使用缩放级别 8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 距离 &gt; 50km 时使用缩放级别 12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 距离 &lt;= 50km 时使用缩放级别 16</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 支持字符串格式的坐标</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> zoomFromString</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getMapScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;116.4074&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;39.9042&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;121.4737&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;31.2304&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h2><table tabindex="0"><thead><tr><th>名称</th><th>说明</th><th>类型</th><th>可选值</th><th>默认值</th></tr></thead><tbody><tr><td>oneLon</td><td>第一点经度</td><td><code>number | string</code></td><td>-</td><td>-</td></tr><tr><td>oneLat</td><td>第一点纬度</td><td><code>number | string</code></td><td>-</td><td>-</td></tr><tr><td>twoLon</td><td>第二点经度</td><td><code>number | string</code></td><td>-</td><td>-</td></tr><tr><td>twoLat</td><td>第二点纬度</td><td><code>number | string</code></td><td>-</td><td>-</td></tr><tr><td>options</td><td>缩放策略选项</td><td><code>GetMapScaleOptions</code></td><td>-</td><td><code>{ type: &#39;big&#39; }</code></td></tr></tbody></table><h3 id="getmapscaleoptions" tabindex="-1">GetMapScaleOptions <a class="header-anchor" href="#getmapscaleoptions" aria-label="Permalink to &quot;GetMapScaleOptions&quot;">​</a></h3><table tabindex="0"><thead><tr><th>名称</th><th>说明</th><th>类型</th><th>可选值</th><th>默认值</th></tr></thead><tbody><tr><td>type</td><td>缩放策略类型</td><td><code>&quot;big&quot; | &quot;small&quot; | [number, number][]</code></td><td><code>&quot;big&quot;</code>: 适合展示较大地理范围<br><code>&quot;small&quot;</code>: 适合精细区域<br>自定义映射表</td><td><code>&quot;big&quot;</code></td></tr></tbody></table><h2 id="返回值" tabindex="-1">返回值 <a class="header-anchor" href="#返回值" aria-label="Permalink to &quot;返回值&quot;">​</a></h2><p><code>number</code>: 推荐的地图缩放级别</p><h2 id="算法说明" tabindex="-1">算法说明 <a class="header-anchor" href="#算法说明" aria-label="Permalink to &quot;算法说明&quot;">​</a></h2><h3 id="距离计算" tabindex="-1">距离计算 <a class="header-anchor" href="#距离计算" aria-label="Permalink to &quot;距离计算&quot;">​</a></h3><p>使用 <strong>Haversine 公式</strong> 计算两点间的球面距离：</p><ul><li>地球半径：6371 公里</li><li>考虑地球曲率，适用于任意距离的计算</li></ul><h3 id="缩放级别映射" tabindex="-1">缩放级别映射 <a class="header-anchor" href="#缩放级别映射" aria-label="Permalink to &quot;缩放级别映射&quot;">​</a></h3><h4 id="big-策略-大范围展示" tabindex="-1">big 策略（大范围展示） <a class="header-anchor" href="#big-策略-大范围展示" aria-label="Permalink to &quot;big 策略（大范围展示）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>最大距离(km)</th><th>缩放级别</th></tr></thead><tbody><tr><td>1000+</td><td>4</td></tr><tr><td>500-1000</td><td>6</td></tr><tr><td>200-500</td><td>7.5</td></tr><tr><td>50-200</td><td>10</td></tr><tr><td>10-50</td><td>10.5</td></tr><tr><td>1-10</td><td>11</td></tr><tr><td>0-1</td><td>15</td></tr></tbody></table><h4 id="small-策略-精细展示" tabindex="-1">small 策略（精细展示） <a class="header-anchor" href="#small-策略-精细展示" aria-label="Permalink to &quot;small 策略（精细展示）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>最大距离(km)</th><th>缩放级别</th></tr></thead><tbody><tr><td>1000+</td><td>3</td></tr><tr><td>500-1000</td><td>4</td></tr><tr><td>200-500</td><td>5</td></tr><tr><td>50-200</td><td>6</td></tr><tr><td>30-50</td><td>7</td></tr><tr><td>20-30</td><td>8</td></tr><tr><td>10-20</td><td>9</td></tr><tr><td>5-10</td><td>10</td></tr><tr><td>1-5</td><td>12</td></tr><tr><td>0-1</td><td>15</td></tr></tbody></table><h2 id="异常" tabindex="-1">异常 <a class="header-anchor" href="#异常" aria-label="Permalink to &quot;异常&quot;">​</a></h2><ul><li>当输入的坐标无效时抛出错误：&quot;Invalid coordinate: [value]&quot;</li><li>当 type 为字符串但不在预定义类型中时抛出错误：&quot;Unknown type: [value]&quot;</li></ul><h2 id="适用场景" tabindex="-1">适用场景 <a class="header-anchor" href="#适用场景" aria-label="Permalink to &quot;适用场景&quot;">​</a></h2><ul><li><strong>地图应用</strong>: 自动调整地图缩放级别以显示两个位置点</li><li><strong>导航功能</strong>: 根据起点和终点距离设置合适的地图视野</li><li><strong>位置分享</strong>: 展示两个位置点的相对关系</li><li><strong>地理分析</strong>: 计算合适比例尺进行地理数据展示</li></ul><blockquote><p>⚠️ 注意：坐标值必须在有效范围内（经度 -180~180，纬度 -90~90），超出范围可能导致计算结果不准确。函数支持字符串格式的数字输入，会自动转换为数值类型。</p></blockquote>`,24)]))}const g=i(n,[["render",l]]);export{E as __pageData,g as default};
